# üí≥ CesuPago API

![Python](https://img.shields.io/badge/Python-3.x-blue)
![Flask](https://img.shields.io/badge/Flask-Latest-green)
![Status](https://img.shields.io/badge/Status-Online-success)

**CesuPago** √© uma API REST completa para gerenciamento de contas banc√°rias digitais. Oferece funcionalidades essenciais como cria√ß√£o de contas, transa√ß√µes financeiras (dep√≥sitos e saques), consultas de saldo e extrato, al√©m de integra√ß√£o com o sistema PIX para transfer√™ncias instant√¢neas.

## üåê Base URL

```
https://cesupago.onrender.com
```

## üìö Documenta√ß√£o Completa

Acesse a documenta√ß√£o interativa no Postman:
üëâ [CesuPago API - Postman Documentation](https://documenter.getpostman.com/view/49143887/2sB3QKsqfD)

---

## üéØ Funcionalidades

- ‚úÖ **Gerenciamento de Contas**: Criar e listar contas banc√°rias
- üí∞ **Consulta de Saldo**: Verificar saldo dispon√≠vel em tempo real
- üíµ **Dep√≥sitos**: Adicionar fundos √†s contas
- üí∏ **Saques**: Retirar valores com valida√ß√£o de saldo
- üìú **Extrato Banc√°rio**: Hist√≥rico completo de transa√ß√µes
- üîë **Sistema PIX**: Cadastro de chaves aleat√≥rias para transfer√™ncias

---

## üìã Endpoints da API

### 1Ô∏è‚É£ Criar Conta Banc√°ria

Cria uma nova conta com saldo inicial de **R$ 100,00**.

```http
POST /criar_conta
Content-Type: application/json
```

**Request Body:**
```json
{
  "nome_cliente": "Maria Silva"
}
```

**Response Success (201):**
```json
{
  "mensagem": "Conta 002 criada para Maria Silva."
}
```

**Response Error (400):**
```json
{
  "erro": "Nome do cliente √© obrigat√≥rio"
}
```

**Exemplo cURL:**
```bash
curl -X POST https://cesupago.onrender.com/criar_conta \
  -H "Content-Type: application/json" \
  -d '{"nome_cliente": "Maria Silva"}'
```

---

### 2Ô∏è‚É£ Listar Todas as Contas

Retorna a lista completa de contas cadastradas no sistema.

```http
GET /contas
```

**Response Success (200):**
```json
[
  {
    "id": "001",
    "nome_cliente": "Everton",
    "saldo": 100.0,
    "extrato": [
      "Abertura da conta (saldo inicial: 100.0)"
    ],
    "chave_pix": null
  },
  {
    "id": "002",
    "nome_cliente": "Maria Silva",
    "saldo": 350.75,
    "extrato": [
      "Abertura da conta (saldo inicial: 100.0)",
      "Dep√≥sito de 250.75 | Saldo: 350.75"
    ],
    "chave_pix": "a3f5c8d9-1234-5678-9abc-def012345678"
  }
]
```

**Exemplo cURL:**
```bash
curl https://cesupago.onrender.com/contas
```

---

### 3Ô∏è‚É£ Consultar Saldo

Verifica o saldo atual de uma conta espec√≠fica.

```http
GET /saldo/{id_conta}
```

**Par√¢metros:**
- `id_conta` (path): ID da conta (ex: 001, 002)

**Response Success (200):**
```json
{
  "saldo": "Saldo da conta 001: 350.75"
}
```

**Response Error:**
```json
{
  "saldo": "Conta n√£o encontrada."
}
```

**Exemplo cURL:**
```bash
curl https://cesupago.onrender.com/saldo/001
```

---

### 4Ô∏è‚É£ Realizar Dep√≥sito

Adiciona fundos a uma conta banc√°ria.

```http
PUT /depositar/{id_conta}
Content-Type: application/json
```

**Par√¢metros:**
- `id_conta` (path): ID da conta

**Request Body:**
```json
{
  "valor": 500.00
}
```

**Response Success (200):**
```json
{
  "mensagem": "Dep√≥sito de 500.00 realizado na conta 001."
}
```

**Response Error (400):**
```json
{
  "erro": "Informe o valor do dep√≥sito"
}
```

**Valida√ß√µes:**
- ‚úÖ Valor deve ser num√©rico
- ‚úÖ Valor deve ser positivo (> 0)

**Exemplo cURL:**
```bash
curl -X PUT https://cesupago.onrender.com/depositar/001 \
  -H "Content-Type: application/json" \
  -d '{"valor": 500.00}'
```

---

### 5Ô∏è‚É£ Realizar Saque

Retira fundos de uma conta banc√°ria.

```http
PUT /sacar/{id_conta}
Content-Type: application/json
```

**Par√¢metros:**
- `id_conta` (path): ID da conta

**Request Body:**
```json
{
  "valor": 150.00
}
```

**Response Success (200):**
```json
{
  "mensagem": "Saque de 150.00 realizado na conta 001."
}
```

**Response Error - Saldo Insuficiente:**
```json
{
  "mensagem": "Saldo insuficiente."
}
```

**Response Error (400):**
```json
{
  "erro": "Informe o valor do saque"
}
```

**Valida√ß√µes:**
- ‚úÖ Valor deve ser num√©rico
- ‚úÖ Valor deve ser positivo (> 0)
- ‚úÖ Saldo deve ser suficiente para o saque

**Exemplo cURL:**
```bash
curl -X PUT https://cesupago.onrender.com/sacar/001 \
  -H "Content-Type: application/json" \
  -d '{"valor": 150.00}'
```

---

### 6Ô∏è‚É£ Visualizar Extrato

Retorna o hist√≥rico completo de transa√ß√µes da conta.

```http
GET /extrato/{id_conta}
```

**Par√¢metros:**
- `id_conta` (path): ID da conta

**Response Success (200):**
```json
{
  "extrato": "Extrato da conta 001:\nAbertura da conta (saldo inicial: 100.0)\nDep√≥sito de 500.00 | Saldo: 600.00\nSaque de 150.00 | Saldo: 450.00"
}
```

**Response Error:**
```json
{
  "extrato": "Conta n√£o encontrada."
}
```

**Exemplo cURL:**
```bash
curl https://cesupago.onrender.com/extrato/001
```

---

### 7Ô∏è‚É£ Cadastrar Chave PIX

Gera e cadastra uma chave PIX aleat√≥ria (formato UUID) para a conta.

```http
POST /pix/cadastrar/{id_conta}
```

**Par√¢metros:**
- `id_conta` (path): ID da conta

**Response Success (201):**
```json
{
  "mensagem": "Chave PIX aleat√≥ria cadastrada com sucesso!",
  "conta": "001",
  "chave_pix": "a3f5c8d9-1234-5678-9abc-def012345678"
}
```

**Response Error - Chave J√° Existe (409):**
```json
{
  "erro": "A conta 001 j√° possui uma chave PIX cadastrada."
}
```

**Response Error - Conta N√£o Encontrada (404):**
```json
{
  "erro": "Conta n√£o encontrada."
}
```

**Exemplo cURL:**
```bash
curl -X POST https://cesupago.onrender.com/pix/cadastrar/001
```

---

## üîÑ Fluxo Completo de Uso

Aqui est√° um exemplo pr√°tico de uso completo da API:

```bash
# 1Ô∏è‚É£ Criar uma nova conta
curl -X POST https://cesupago.onrender.com/criar_conta \
  -H "Content-Type: application/json" \
  -d '{"nome_cliente": "Jo√£o Pedro"}'

# 2Ô∏è‚É£ Listar todas as contas
curl https://cesupago.onrender.com/contas

# 3Ô∏è‚É£ Consultar saldo inicial
curl https://cesupago.onrender.com/saldo/002

# 4Ô∏è‚É£ Realizar um dep√≥sito
curl -X PUT https://cesupago.onrender.com/depositar/002 \
  -H "Content-Type: application/json" \
  -d '{"valor": 1000}'

# 5Ô∏è‚É£ Cadastrar chave PIX
curl -X POST https://cesupago.onrender.com/pix/cadastrar/002

# 6Ô∏è‚É£ Fazer um saque
curl -X PUT https://cesupago.onrender.com/sacar/002 \
  -H "Content-Type: application/json" \
  -d '{"valor": 250}'

# 7Ô∏è‚É£ Verificar extrato completo
curl https://cesupago.onrender.com/extrato/002
```

---

## üêç Exemplo em Python

```python
import requests

BASE_URL = "https://cesupago.onrender.com"

# Criar uma nova conta
response = requests.post(
    f"{BASE_URL}/criar_conta",
    json={"nome_cliente": "Ana Carolina"}
)
print(response.json())

# Consultar saldo
response = requests.get(f"{BASE_URL}/saldo/003")
print(response.json())

# Fazer dep√≥sito
response = requests.put(
    f"{BASE_URL}/depositar/003",
    json={"valor": 750.50}
)
print(response.json())

# Cadastrar PIX
response = requests.post(f"{BASE_URL}/pix/cadastrar/003")
print(response.json())

# Fazer saque
response = requests.put(
    f"{BASE_URL}/sacar/003",
    json={"valor": 200}
)
print(response.json())

# Ver extrato
response = requests.get(f"{BASE_URL}/extrato/003")
print(response.json())
```

---

## üíª Exemplo em JavaScript (Node.js)

```javascript
const axios = require('axios');

const BASE_URL = 'https://cesupago.onrender.com';

// Criar conta
async function criarConta() {
  const response = await axios.post(`${BASE_URL}/criar_conta`, {
    nome_cliente: 'Carlos Eduardo'
  });
  console.log(response.data);
}

// Depositar
async function depositar(idConta, valor) {
  const response = await axios.put(`${BASE_URL}/depositar/${idConta}`, {
    valor: valor
  });
  console.log(response.data);
}

// Executar
criarConta();
depositar('001', 300);
```

---

## üìä C√≥digos de Status HTTP

| C√≥digo | Descri√ß√£o |
|--------|-----------|
| **200** | Requisi√ß√£o bem-sucedida |
| **201** | Recurso criado com sucesso |
| **400** | Requisi√ß√£o inv√°lida (dados faltando ou inv√°lidos) |
| **404** | Recurso n√£o encontrado |
| **409** | Conflito (chave PIX j√° cadastrada) |

---

## üé≤ Regras de Neg√≥cio

### Cria√ß√£o de Contas
- ‚úÖ Toda conta nova recebe **R$ 100,00** de saldo inicial
- ‚úÖ ID da conta √© gerado automaticamente de forma sequencial (001, 002, 003...)
- ‚úÖ Nome do cliente √© obrigat√≥rio

### Dep√≥sitos
- ‚úÖ Valor deve ser num√©rico e positivo
- ‚úÖ N√£o h√° limite m√°ximo para dep√≥sitos
- ‚úÖ Todas as transa√ß√µes s√£o registradas no extrato

### Saques
- ‚úÖ Valor deve ser num√©rico e positivo
- ‚úÖ Saldo deve ser suficiente para realizar o saque
- ‚úÖ N√£o √© permitido ficar com saldo negativo

### Chave PIX
- ‚úÖ Cada conta pode ter apenas **uma chave PIX**
- ‚úÖ A chave √© gerada automaticamente no formato UUID
- ‚úÖ N√£o √© poss√≠vel alterar a chave ap√≥s o cadastro

---

## üõ†Ô∏è Tecnologias Utilizadas

| Tecnologia | Descri√ß√£o |
|------------|-----------|
| **Python 3.x** | Linguagem de programa√ß√£o |
| **Flask** | Framework web para API REST |
| **UUID** | Gera√ß√£o de identificadores √∫nicos para PIX |
| **Render** | Plataforma de hospedagem cloud |

---

## üìÅ Estrutura do Projeto

```
cesupago/
‚îÇ
‚îú‚îÄ‚îÄ app.py              # Rotas da API (endpoints)
‚îú‚îÄ‚îÄ banco.py            # L√≥gica de neg√≥cio (classe CesuPago)
‚îú‚îÄ‚îÄ contas.py           # Dados iniciais das contas
‚îú‚îÄ‚îÄ README.md           # Documenta√ß√£o (este arquivo)
‚îî‚îÄ‚îÄ requirements.txt    # Depend√™ncias do projeto
```

---

## üß™ Testando a API

### Postman
1. Acesse a [documenta√ß√£o no Postman](https://documenter.getpostman.com/view/49143887/2sB3QKsqfD)
2. Clique em "Run in Postman" para importar a cole√ß√£o
3. Configure a vari√°vel de ambiente `base_url` para `https://cesupago.onrender.com`
4. Execute as requisi√ß√µes

### Insomnia
1. Crie uma nova requisi√ß√£o
2. Configure o m√©todo HTTP (GET, POST, PUT)
3. Insira a URL completa do endpoint
4. Adicione o body (quando necess√°rio)
5. Envie a requisi√ß√£o

### Thunder Client (VS Code)
1. Instale a extens√£o Thunder Client
2. Crie uma nova requisi√ß√£o
3. Configure m√©todo, URL e body
4. Execute

---

## üë• Equipe de Desenvolvimento

- **Everton** - Desenvolvedor Backend e Arquitetura inicial
- **Filipe** - Implementa√ß√£o do sistema PIX

---

## üöÄ Como Executar Localmente

```bash
# Clone o reposit√≥rio
git clone https://gitlab.com/grupo-cesupago/cesupago.git
cd cesupago

# Instale as depend√™ncias
pip install flask

# Execute a aplica√ß√£o
python app.py

# Acesse em: http://localhost:5000
```

---

## üìù Notas Importantes

- üîí Esta √© uma API de **demonstra√ß√£o educacional**
- ‚ö†Ô∏è **N√£o utilize em produ√ß√£o** sem implementar:
  - Sistema de autentica√ß√£o (JWT, OAuth)
  - Autoriza√ß√£o e controle de acesso
  - Valida√ß√£o robusta de dados
  - Criptografia de dados sens√≠veis
  - Rate limiting
  - Logs de auditoria
  - Backup de dados

---

## üìÑ Licen√ßa

Este projeto √© de c√≥digo aberto para fins educacionais.

---

## üîó Links √öteis

- üåê **API em Produ√ß√£o**: https://cesupago.onrender.com
- üìñ **Documenta√ß√£o Postman**: https://documenter.getpostman.com/view/49143887/2sB3QKsqfD
- üíª **Reposit√≥rio GitLab**: https://gitlab.com/grupo-cesupago/cesupago

---

## üìû Suporte

Para d√∫vidas, sugest√µes ou reportar problemas:
- Abra uma issue no GitLab
- Entre em contato com a equipe de desenvolvimento

---

**üéâ Desenvolvido com üíô pela equipe CesuPago**